<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <!-- iOS standalone -->
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Wall">
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="refresh" content="600">

  <title>Wall</title>

  <style>
    html, body { height:100%; }
    body{
      margin:0;
      background:#0b0b0c;
      color:#fff;
      font-family:-apple-system, Helvetica, Arial, sans-serif;
      overflow:hidden;
    }

    .wrap{
      padding:10px;
      max-width:760px;
      margin:0 auto;
      height:100%;
      display:flex;
      flex-direction:column;
      gap:10px;
      box-sizing:border-box;
    }

    .row{ display:flex; gap:10px; min-height:0; }
    .card{
      background:#141417;
      border:1px solid #23232a;
      border-radius:16px;
      padding:10px;
      overflow:hidden;
      box-sizing:border-box;
    }

    .label{
      font-size:11px;
      letter-spacing:.18em;
      text-transform:uppercase;
      opacity:.65;
      margin-bottom:8px;
    }

    /* Layout */
    .topRow{ flex:0 0 26%; }
    .calCard{ flex:0 0 44%; }
    .newsCard{ flex:1; }

    .clockCard{ flex:1.15; }
    .wxCard{ flex:0.85; }

    /* Clock */
    .clock{
      font-size:56px;
      font-weight:650;
      letter-spacing:1px;
      line-height:1;
    }
    .date{
      margin-top:8px;
      font-size:14px;
      opacity:.82;
    }

    /* Day progress */
    .progressWrap{ margin-top:10px; }
    .progressMeta{
      display:flex;
      justify-content:space-between;
      font-size:12px;
      opacity:.7;
      margin-bottom:6px;
    }
    .bar{
      height:10px;
      border-radius:999px;
      background:#0f0f12;
      border:1px solid rgba(255,255,255,.08);
      overflow:hidden;
    }
    .barFill{
      height:100%;
      width:0%;
      background:rgba(154,208,255,.85);
    }

    /* Weather (plain text, styled) */
    .wxText{
      height:calc(100% - 22px);
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:6px;
    }
    .wxTemp{
      font-size:46px;
      font-weight:650;
      line-height:1;
    }
    .wxCond{
      font-size:16px;
      opacity:.85;
    }

    /* Calendar */
    .calTitle{
      font-size:14px;
      font-weight:650;
      margin-bottom:6px;
    }
    table.cal{
      width:100%;
      border-spacing:6px;
      table-layout:fixed;
    }
    table.cal th{
      font-size:10px;
      letter-spacing:.12em;
      text-transform:uppercase;
      opacity:.5;
      text-align:left;
    }
    table.cal td{
      height:34px;
      padding:6px;
      border-radius:12px;
      background:#101013;
      border:1px solid rgba(255,255,255,.08);
      font-size:12px;
    }
    td.today{
      border-color:rgba(154,208,255,.55);
      background:#0f141c;
    }
    td.blank{ opacity:0; }

    /* News */
    .newsList{ list-style:none; padding:0; margin:0; }
    .newsList li{ margin:7px 0; font-size:13px; }
    .newsList a{ color:#fff; text-decoration:none; opacity:.9; }

  </style>
</head>

<body>
<div class="wrap">

  <div class="row topRow">
    <div class="card clockCard">
      <div class="clock" id="clock">--:--</div>
      <div class="date" id="date">—</div>

      <div class="progressWrap">
        <div class="progressMeta">
          <span id="dayPct">—%</span>
          <span id="dayLeft">—h left</span>
        </div>
        <div class="bar"><div class="barFill" id="barFill"></div></div>
      </div>
    </div>

    <div class="card wxCard">
      <div class="label">Weather · 43207</div>
      <div class="wxText">
        <div class="wxTemp" id="wxTemp">—°</div>
        <div class="wxCond" id="wxCond">Loading…</div>
      </div>
    </div>
  </div>

  <div class="card calCard">
    <div class="label">Calendar</div>
    <div class="calTitle" id="calTitle">—</div>
    <div id="calWrap"></div>
  </div>

  <div class="card newsCard">
    <div class="label">Reuters</div>
    <ul class="newsList" id="news"><li>Loading…</li></ul>
  </div>

</div>

<script>
(function(){
  function pad(n){return (n<10?'0':'')+n;}

  /* Clock + progress */
  function tick(){
    var d=new Date();
    var h=d.getHours(), m=d.getMinutes();
    var am=h>=12?'PM':'AM';
    h=h%12||12;
    document.getElementById('clock').textContent=h+':'+pad(m)+' '+am;
    document.getElementById('date').textContent=
      d.toLocaleDateString(undefined,{weekday:'long',month:'long',day:'numeric',year:'numeric'});

    var start=new Date(d.getFullYear(),d.getMonth(),d.getDate());
    var end=new Date(d.getFullYear(),d.getMonth(),d.getDate(),23,59,59);
    var pct=(d-start)/(end-start);
    document.getElementById('dayPct').textContent=Math.round(pct*100)+'%';
    document.getElementById('dayLeft').textContent=
      Math.floor((end-d)/36e5)+'h left';
    document.getElementById('barFill').style.width=(pct*100)+'%';
  }
  tick(); setInterval(tick,1000);

  /* Weather — dumb text, cleaned */
  function loadWeather(){
    var r=new XMLHttpRequest();
    r.onreadystatechange=function(){
      if(r.readyState===4){
        if(r.status!==200){ return; }
        var t=r.responseText.replace(/[^\x00-\x7F]/g,'').trim();
        var parts=t.split(' ');
        var temp='—°', cond='';
        for(var i=0;i<parts.length;i++){
          if(parts[i].indexOf('°F')>-1){ temp=parts[i]; }
          else cond+=parts[i]+' ';
        }
        document.getElementById('wxTemp').textContent=temp;
        document.getElementById('wxCond').textContent=cond.trim();
      }
    };
    r.open('GET','https://wttr.in/43207?format=2',true);
    r.send();
  }
  loadWeather();
  setInterval(loadWeather,600000);

  /* Calendar — current month only */
  var n=new Date(), y=n.getFullYear(), m=n.getMonth(), d=n.getDate();
  document.getElementById('calTitle').textContent=
    n.toLocaleDateString(undefined,{month:'long'});

  var first=new Date(y,m,1).getDay();
  var days=new Date(y,m+1,0).getDate();
  var html='<table class="cal"><tr>';
  ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(function(x){
    html+='<th>'+x+'</th>';
  });
  html+='</tr><tr>';

  for(var i=0;i<first;i++) html+='<td class="blank"></td>';
  for(var day=1;day<=days;day++){
    if((first+day-1)%7===0) html+='</tr><tr>';
    html+='<td'+(day===d?' class="today"':'')+'>'+day+'</td>';
  }
  html+='</tr></table>';
  document.getElementById('calWrap').innerHTML=html;

})();
</script>
</body>
</html>
